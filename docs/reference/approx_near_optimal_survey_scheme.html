<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Approximately near optimal survey scheme — approx_near_optimal_survey_scheme • surveyvoi</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Approximately near optimal survey scheme — approx_near_optimal_survey_scheme"><meta property="og:description" content="Find a near optimal survey scheme that maximizes value of information.
This function uses the approximation method
for calculating the expected value of the decision given a survey scheme,
and a greedy heuristic algorithm to maximize this metric."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">surveyvoi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/surveyvoi.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jeffreyhanson/surveyvoi/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Approximately near optimal survey scheme</h1>
    <small class="dont-index">Source: <a href="https://github.com/jeffreyhanson/surveyvoi/blob/HEAD/R/approx_near_optimal_survey_scheme.R" class="external-link"><code>R/approx_near_optimal_survey_scheme.R</code></a></small>
    <div class="hidden name"><code>approx_near_optimal_survey_scheme.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Find a near optimal survey scheme that maximizes value of information.
This function uses the approximation method
for calculating the expected value of the decision given a survey scheme,
and a greedy heuristic algorithm to maximize this metric.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">approx_near_optimal_survey_scheme</span><span class="op">(</span>
  <span class="va">site_data</span>,
  <span class="va">feature_data</span>,
  <span class="va">site_detection_columns</span>,
  <span class="va">site_n_surveys_columns</span>,
  <span class="va">site_probability_columns</span>,
  <span class="va">site_management_cost_column</span>,
  <span class="va">site_survey_cost_column</span>,
  <span class="va">feature_survey_column</span>,
  <span class="va">feature_survey_sensitivity_column</span>,
  <span class="va">feature_survey_specificity_column</span>,
  <span class="va">feature_model_sensitivity_column</span>,
  <span class="va">feature_model_specificity_column</span>,
  <span class="va">feature_target_column</span>,
  <span class="va">total_budget</span>,
  <span class="va">survey_budget</span>,
  site_management_locked_in_column <span class="op">=</span> <span class="cn">NULL</span>,
  site_management_locked_out_column <span class="op">=</span> <span class="cn">NULL</span>,
  site_survey_locked_out_column <span class="op">=</span> <span class="cn">NULL</span>,
  prior_matrix <span class="op">=</span> <span class="cn">NULL</span>,
  n_approx_replicates <span class="op">=</span> <span class="fl">100</span>,
  n_approx_outcomes_per_replicate <span class="op">=</span> <span class="fl">10000</span>,
  seed <span class="op">=</span> <span class="fl">500</span>,
  n_threads <span class="op">=</span> <span class="fl">1</span>,
  verbose <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>site_data</dt>
<dd><p><code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf()</a></code> object with site data.</p></dd>
<dt>feature_data</dt>
<dd><p><code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">base::data.frame()</a></code> object with feature data.</p></dd>
<dt>site_detection_columns</dt>
<dd><p><code>character</code> names of <code>numeric</code>
columns in the argument to <code>site_data</code> that contain the proportion of
surveys conducted within each site that detected each feature.
Each column should correspond to a different feature, and contain
a proportion value (between zero and one). If a site has
not previously been surveyed, a value of zero should be used.</p></dd>
<dt>site_n_surveys_columns</dt>
<dd><p><code>character</code> names of <code>numeric</code>
columns in the argument to <code>site_data</code> that contain the total
number of surveys conducted for each each feature within each site.
Each column should correspond to a different feature, and contain
a non-negative integer number (e.g. 0, 1, 2, 3). If a site has
not previously been surveyed, a value of zero should be used.</p></dd>
<dt>site_probability_columns</dt>
<dd><p><code>character</code> names of <code>numeric</code>
columns in the argument to <code>site_data</code> that contain modelled
probabilities of occupancy for each feature in each site.
Each column should correspond to a different feature, and contain
probability data (values between zero and one). No missing (<code>NA</code>)
values are permitted in these columns.</p></dd>
<dt>site_management_cost_column</dt>
<dd><p><code>character</code> name of column in the
argument to <code>site_data</code> that contains costs for managing each
site for conservation. This column should have <code>numeric</code> values that
are equal to or greater than zero. No missing (<code>NA</code>) values are
permitted in this column.</p></dd>
<dt>site_survey_cost_column</dt>
<dd><p><code>character</code> name of column in the
argument to  <code>site_data</code> that contains costs for surveying each
site. This column should have <code>numeric</code> values that are equal to
or greater than zero. No missing (<code>NA</code>) values are permitted in this
column.</p></dd>
<dt>feature_survey_column</dt>
<dd><p><code>character</code> name of the column in the
argument to <code>feature_data</code> that contains <code>logical</code> (<code>TRUE</code> /
<code>FALSE</code>) values indicating if the feature will be surveyed in
the planned surveys or not. Note that considering additional features will
rapidly increase computational burden, and so it is only recommended to
consider features that are of specific conservation interest.
No missing (<code>NA</code>) values are permitted in this column.</p></dd>
<dt>feature_survey_sensitivity_column</dt>
<dd><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of future surveys correctly detecting a presence of each
feature in a given site (i.e. the sensitivity of the survey methodology).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.</p></dd>
<dt>feature_survey_specificity_column</dt>
<dd><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of future surveys correctly detecting an absence of each
feature in a given site (i.e. the specificity of the survey methodology).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.</p></dd>
<dt>feature_model_sensitivity_column</dt>
<dd><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of the initial models correctly predicting a presence of each
feature in a given site (i.e. the sensitivity of the models).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.
This should ideally be calculated using
<code><a href="fit_xgb_occupancy_models.html">fit_xgb_occupancy_models()</a></code> or
<code><a href="fit_hglm_occupancy_models.html">fit_hglm_occupancy_models()</a></code>.</p></dd>
<dt>feature_model_specificity_column</dt>
<dd><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of the initial models correctly predicting an absence of each
feature in a given site (i.e. the specificity of the models).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.
This should ideally be calculated using
<code><a href="fit_xgb_occupancy_models.html">fit_xgb_occupancy_models()</a></code> or
<code><a href="fit_hglm_occupancy_models.html">fit_hglm_occupancy_models()</a></code>.</p></dd>
<dt>feature_target_column</dt>
<dd><p><code>character</code> name of the column in the
argument to <code>feature_data</code> that contains the \(target\)
values used to parametrize the conservation benefit of managing of each
feature.
This column should have <code>numeric</code> values that
are equal to or greater than zero. No missing (<code>NA</code>) values are
permitted in this column.</p></dd>
<dt>total_budget</dt>
<dd><p><code>numeric</code> maximum expenditure permitted
for conducting surveys and managing sites for conservation.</p></dd>
<dt>survey_budget</dt>
<dd><p><code>numeric</code> maximum expenditure permitted
for conducting surveys.</p></dd>
<dt>site_management_locked_in_column</dt>
<dd><p><code>character</code> name of the column
in the argument to <code>site_data</code> that contains <code>logical</code>
(<code>TRUE</code> / <code>FALSE</code>) values indicating which sites should
be locked in for (<code>TRUE</code>) being managed for conservation or
(<code>FALSE</code>) not. No missing (<code>NA</code>) values are permitted in this
column. This is useful if some sites have already been earmarked for
conservation, or if some sites are already being managed for conservation.
Defaults to <code>NULL</code> such that no sites are locked in.</p></dd>
<dt>site_management_locked_out_column</dt>
<dd><p><code>character</code> name of the column
in the argument to <code>site_data</code> that contains <code>logical</code>
(<code>TRUE</code> / <code>FALSE</code>) values indicating which sites should
be locked out for (<code>TRUE</code>) being managed for conservation or
(<code>FALSE</code>) not. No missing (<code>NA</code>) values are permitted in this
column. This is useful if some sites could potentially be surveyed
to improve model predictions even if they cannot be managed for
conservation. Defaults to <code>NULL</code> such that no sites are locked out.</p></dd>
<dt>site_survey_locked_out_column</dt>
<dd><p><code>character</code> name of the column
in the argument to <code>site_data</code> that contains <code>logical</code>
(<code>TRUE</code> / <code>FALSE</code>) values indicating which sites should
be locked out (<code>TRUE</code>) from being selected for future surveys or
(<code>FALSE</code>) not. No missing (<code>NA</code>) values are permitted in this
column. This is useful if some sites will never be considered for future
surveys (e.g. because they are too costly to survey, or have a
low chance of containing the target species).
Defaults to <code>NULL</code> such that no sites are locked out.</p></dd>
<dt>prior_matrix</dt>
<dd><p><code>numeric</code> <code>matrix</code> containing
the prior probability of each feature occupying each site.
Rows correspond to features, and columns correspond to sites.
Defaults to <code>NULL</code> such that prior data is calculated automatically
using <code><a href="prior_probability_matrix.html">prior_probability_matrix()</a></code>.</p></dd>
<dt>n_approx_replicates</dt>
<dd><p><code>integer</code> number of replicates to use for
approximating the expected value calculations. Defaults to 100.</p></dd>
<dt>n_approx_outcomes_per_replicate</dt>
<dd><p><code>integer</code> number of outcomes to
use per replicate for approximation calculations. Defaults to 10000.</p></dd>
<dt>seed</dt>
<dd><p><code>integer</code> state of the random number generator for
simulating outcomes when conducting the value of information analyses.
Defaults to 500.</p></dd>
<dt>n_threads</dt>
<dd><p><code>integer</code> number of threads to use for computation.</p></dd>
<dt>verbose</dt>
<dd><p><code>logical</code> indicating if information should be
printed during processing. Defaults to <code>FALSE</code>.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>matrix</code> of <code>logical</code> (<code>TRUE</code>/ <code>FALSE</code>)
values indicating if a site is selected in the scheme or not. Columns
correspond to sites, and rows correspond to different schemes. If there
are no ties for the best identified solution, then the the <code>matrix</code>will only contain a single row.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Ideally, the brute-force algorithm would be used to identify the optimal
survey scheme. Unfortunately, it is not feasible to apply the brute-force
to large problems because it can take an incredibly long time to complete.
In such cases, it may be desirable to obtain a "relatively good" survey
scheme and the greedy heuristic algorithm is provided for such cases.
The greedy heuristic algorithm -- unlike the brute force algorithm --
is not guaranteed to identify an optimal solution -- or even a "relatively
good solution" for that matter -- though greedy heuristic algorithms tend to
deliver solutions that are 15\<!-- % from optimality. Specifically, this -->
greedy algorithms is implemented as:</p>
<ol><li><p>Initialize an empty <em>list of survey scheme solutions</em>, and an
empty <em>list of approximate expected values</em>.</p></li>
<li><p>Calculate the expected value of current information.</p></li>
<li><p>Add a survey scheme with no sites selected for surveying to the
<em>list of survey scheme solutions</em>, and add the expected value of current
information to the <em>list of approximate expected values</em>.</p></li>
<li><p>Set the <em>current survey solution</em> as the survey scheme with no
sites selected for surveying.</p></li>
<li><p>For each remaining candidate site that has not been selected for
a survey, generate a new candidate survey scheme with each candidate site
added to the current survey solution.</p></li>
<li><p>Calculate the approximate expected value of each
new candidate survey scheme. If the cost of a given candidate survey scheme
exceeds the survey budget, then store a missing <code>NA value</code> instead.
Also if the the cost of a given candidate survey scheme plus the
management costs of locked in planning units exceeds the total budget,
then a store a missing value <code>NA</code> value too.</p></li>
<li><p>If all of the new candidate survey schemes are associated with
missing <code>NA</code> values -- because they all exceed the survey budget -- then
go to step 12.</p></li>
<li><p>Calculate the cost effectiveness of each new candidate survey
scheme. This calculated as the difference between the approximate expected
value of a given new candidate survey scheme and that of the
<em>current survey solution</em>, and dividing this difference by the the cost
of the newly selected candidate site.</p></li>
<li><p>Find the new candidate survey scheme that is associated with the
highest cost-effectiveness value, ignoring any missing <code>NA</code> values.
This new candidate survey scheme is now set as the
<em>current survey scheme</em>.</p></li>
<li><p>Store the <em>current survey scheme</em> in the
<em>list of survey scheme solutions</em> and store its approximate expected
value in the <em>list of approximate expected values</em>.</p></li>
<li><p>Go to step 12.</p></li>
<li><p>Find the solution in the <em>list of survey scheme solutions</em> that
has the highest expected value in the
<em>list of approximate expected values</em> and return this solution.</p></li>
</ol></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># set seeds for reproducibility</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.wim.uni-mannheim.de/schlather/publications/software" class="external-link">RandomFields</a></span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/pkg/RandomFields/man/RFoptions.html" class="external-link">RFoptions</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="fl">201</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># simulate data</span></span>
<span class="r-in"><span class="va">site_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="simulate_site_data.html">simulate_site_data</a></span><span class="op">(</span>n_sites <span class="op">=</span> <span class="fl">30</span>, n_features <span class="op">=</span> <span class="fl">2</span>, prop <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...</span>
<span class="r-in"><span class="va">feature_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="simulate_feature_data.html">simulate_feature_data</a></span><span class="op">(</span>n_features <span class="op">=</span> <span class="fl">2</span>, prop <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"><span class="va">feature_data</span><span class="op">$</span><span class="va">target</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/RandomFields/man/QMath.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># preview simulated data</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">site_data</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simple feature collection with 30 features and 11 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry type: POINT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dimension:     XY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Bounding box:  xmin: 0.04205953 ymin: 0.02461368 xmax: 0.9942698 ymax: 0.9630242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CRS:           NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 30 × 12</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    survey_cost management_cost    f1    f2    n1    n2     e1     e2     e3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>        6.93            65.6   0.2   0       5     5  1.13  -<span style="color: #BB0000;">1.55</span>   0.470</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>       10.8             71.3   0     0.2     5     5  0.648 -<span style="color: #BB0000;">0.890</span> -<span style="color: #BB0000;">0.187</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>       11.8             65.2   0     0       2     2  1.18  -<span style="color: #BB0000;">1.08</span>   1.12 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>       11.7             67.2   0     0       2     2  0.226 -<span style="color: #BB0000;">0.666</span> -<span style="color: #BB0000;">0.474</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>        8.04            76.4   1     0       4     4 -<span style="color: #BB0000;">1.75</span>   1.71  -<span style="color: #BB0000;">2.13</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>        9.81            66.4   0     0       0     0  1.34  -<span style="color: #BB0000;">1.14</span>   0.533</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>       12.6             67.5   0     0       1     1  1.04  -<span style="color: #BB0000;">1.01</span>   0.810</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>       10.3             77.9   0.8   0.4     5     5 -<span style="color: #BB0000;">1.25</span>   1.06  -<span style="color: #BB0000;">1.25</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>       12.1             74.0   1     1       1     1 -<span style="color: #BB0000;">0.259</span>  0.441  0.590</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>        9.73            72.2   1     1       3     3 -<span style="color: #BB0000;">0.387</span>  0.631  0.690</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 20 more rows, and 3 more variables: p1 &lt;dbl&gt;, p2 &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   geometry &lt;POINT&gt;</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">feature_data</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name  survey survey_sensitivity survey_specificity model_sensitivity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> f1    TRUE                0.977              0.835             0.777</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> f2    TRUE                0.975              0.835             0.731</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 2 more variables: model_specificity &lt;dbl&gt;, target &lt;dbl&gt;</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># set total budget for managing sites for conservation</span></span>
<span class="r-in"><span class="co"># (i.e. 50% of the cost of managing all sites)</span></span>
<span class="r-in"><span class="va">total_budget</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">site_data</span><span class="op">$</span><span class="va">management_cost</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.5</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># set total budget for surveying sites for conservation</span></span>
<span class="r-in"><span class="co"># (i.e. 10% of the cost of managing all sites)</span></span>
<span class="r-in"><span class="va">survey_budget</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">site_data</span><span class="op">$</span><span class="va">survey_cost</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.1</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># find survey scheme using approximate method and greedy heuristic algorithm</span></span>
<span class="r-in"><span class="co"># (using 10 replicates so that this example completes relatively quickly)</span></span>
<span class="r-in"><span class="va">approx_near_optimal_survey</span> <span class="op">&lt;-</span> <span class="fu">approx_near_optimal_survey_scheme</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">site_data</span>, <span class="va">feature_data</span>,</span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/pkg/RandomFields/man/QMath.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"f1"</span>, <span class="st">"f2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/RandomFields/man/QMath.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n1"</span>, <span class="st">"n2"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/RandomFields/man/QMath.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"p1"</span>, <span class="st">"p2"</span><span class="op">)</span>,</span>
<span class="r-in">  <span class="st">"management_cost"</span>, <span class="st">"survey_cost"</span>,</span>
<span class="r-in">  <span class="st">"survey"</span>, <span class="st">"survey_sensitivity"</span>, <span class="st">"survey_specificity"</span>,</span>
<span class="r-in">  <span class="st">"model_sensitivity"</span>, <span class="st">"model_specificity"</span>,</span>
<span class="r-in">  <span class="st">"target"</span>, <span class="va">total_budget</span>, <span class="va">survey_budget</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># print result</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">approx_near_optimal_survey</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       [,1]  [,2]  [,3]  [,4]  [,5]  [,6]  [,7]  [,8]  [,9] [,10] [,11] [,12]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,13] [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,25] [,26] [,27] [,28] [,29] [,30]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] FALSE  TRUE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] FALSE  TRUE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] FALSE  TRUE FALSE FALSE FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"ev")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.89231e-10 1.89231e-10 1.89231e-10 1.89231e-10</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>, <a href="http://www.iadine-chades.org" class="external-link">Iadine Chadès</a>, <a href="https://ejhudgins.com" class="external-link">Emma J Hudgins</a>, Joseph R Bennett.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

